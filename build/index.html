<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Voucherify integration with HubSpot</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" href="/style.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.1.2/handlebars.min.js"></script>
        <script src="/jquery-3.4.1.min.js"></script>
    </head>
    <body>
        <div class="container-fluid">
            <h1>Voucherify coupon distribution via HubSpot</h1>
            <h6>Choose voucherify campaign and click distribute, to attach couponCode property to every single customer from HubSpot client list</h6>
            <form id="form">
                <label for="campaignsList">Choose campaign</label>
                <div class="form-group">
                    <select class="form-control" id="campaignsList">
                        <script id="campaignsListScript" type="text/x-handlebars-template">
                            {{#each campaigns}}
                                <option value="{{name}}">{{name}}</option>
                            {{/each}}
                        </script>
                    </select>
                </div>
                <div class="form-group">
                    <label for="contactsList">Select your Hubspot contacts list</label>
                    <select class="form-control" id="contactsList">
                        <script id="contactsListScript" type="text/x-handlebars-template">
                            {{#each lists}}
                                <option value="{{id}}">{{name}}</option>
                            {{/each}}
                        </script>
                    </select>
                </div>
                <div class="form-group">
                    <label for="sourceIdProperties">Choose contact property to be source_id for distribution</label>
                    <input type="text" class="form-control" id="sourceIdInput">

                    <div id="propertyListContainer">
                        <script id="sourceIdPropertiesScript" type="text/x-handlebars-template">
                            <ul id="propertiesList" class="list">
                                {{#each properties}}
                                    <li class="property">{{name}}</li>
                                {{/each}}
                            </ul>
                        </script>
                    </div>
                </div>
                <div class="form-group">
                    <label for="couponPropertyInput">New contact property that will contain coupon code - only lowercase word characters accepted!</label>
                    <input type="text" class="form-control" id="couponPropertyInput">
                    <span id="couponPropertyInputError">This property is already existing. Try another one!</span>
                </div>
                <button id="submitButton" type="submit" class="btn btn-primary">Distribute</button>
                <div id="loader" class="spinner-grow text-primary" role="status">
                        <span class="sr-only">Loading...</span>
                </div>
            </form>
            <div id="successIndicator" class="alert alert-success" role="alert">Success!</div>
        </div>
        <script type="text/javascript" src="index.js"></script>
    </body>
</html>